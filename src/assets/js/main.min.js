'use strict';

(function () {

    'use strict';

    angular.module('controlpanel', ['ngRoute', 'ngDialog', 'LocalStorageModule', 'controlpanel.core', 'controlpanel.home', 'controlpanel.login', 'controlpanel.user', 'controlpanel.item', 'controlpanel.accessDenied']);
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel').controller('controlpanelController', controlpanelController);

    controlpanelController.$inject = ['DataFactory'];

    function controlpanelController(DataFactory) {
        var vm = this;
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel').config(configRouter).config(ConfigLocalStorage).run(["$rootScope", "$location", "$timeout", "CoreAuthService", run]);

    configRouter.$inject = ["$routeProvider", "$locationProvider"];

    function configRouter($routeProvider, $locationProvider) {
        $locationProvider.hashPrefix('');
        $routeProvider.otherwise({ redirectTo: "/login" });
    }

    ConfigLocalStorage.$inject = ['localStorageServiceProvider'];

    function ConfigLocalStorage(localStorageServiceProvider) {
        localStorageServiceProvider.setPrefix('controlpanel');
    }

    function run($rootScope, $location, $timeout, CoreAuthService) {
        $rootScope.$on("$routeChangeStart", function ($event, next) {
            if (!next.$$route || next.$$route.allowAnonymous || next.$$route.redirectTo) {
                return true;
            }

            if (!CoreAuthService.isLoggedIn()) {
                $location.path("/login");
                return;
            }

            if (CoreAuthService.isLoggedIn() && next.$$route.originalPath == '/login') {
                $location.path('/home');
                return;
            }

            if (next.$$route.role && !CoreAuthService.hasRole(next.$$route.role)) {
                $location.path("/access-denied");
            }
        });
    }
})();
'use strict';

(function () {

    angular.module('controlpanel.home', []);

    angular.module('controlpanel.home').config(homeConfig);

    homeConfig.$inject = ['$routeProvider'];
    function homeConfig($routeProvider) {
        $routeProvider.when("/home", {
            controller: 'homeController',
            controllerAs: 'vm',
            templateUrl: 'modules/home/home.html',
            allowWithoutEvent: true
        });
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.home').controller('homeController', homeController);

    homeController.$inject = [];

    function homeController() {
        //vars
        var vm = this;
        vm.compress = true;
        vm.diminuiMenu = function () {
            vm.compress = !vm.compress;
            console.log('asdsa');
        };
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.home').service('homeService', homeService);

    homeService.$inject = [];

    function homeService() {}
})();
'use strict';

(function () {
    'use strict';

    angular.module('controlpanel.login', []).config(loginConfig);

    loginConfig.$inject = ['$routeProvider'];
    function loginConfig($routeProvider) {
        $routeProvider.when("/login", {
            controller: 'loginController',
            controllerAs: 'vm',
            templateUrl: 'modules/login/login.html',
            allowWithoutEvent: true
        });
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.login').controller('loginController', loginController);

    loginController.$inject = ['$http', 'CoreLoginService', 'CoreAuthService', 'CoreUserService', '$location'];

    function loginController($http, CoreLoginService, CoreAuthService, CoreUserService, $location) {
        //vars
        var vm = this;
        var test = CoreAuthService.getTokenData();
        vm.login = { email: '', password: '' };

        //functions to view
        vm.entrar = function () {
            CoreLoginService.login(vm.login).then(function (data) {
                $location.path('/home');
            }, function (err) {
                console.log(err);
            });
        };
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.login').service('loginService', loginService);

    loginService.$inject = [];

    function loginService() {}
})();
'use strict';

(function () {
    'use strict';

    angular.module('controlpanel.item', []).config(loginConfig);

    loginConfig.$inject = ['$routeProvider'];
    function loginConfig($routeProvider) {
        $routeProvider.when("/item", {
            controller: 'itemController',
            controllerAs: 'vm',
            templateUrl: 'modules/item/item.html',
            allowWithoutEvent: true,
            role: ['admin', 'user']
        });
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.item').controller('itemController', itemController);

    itemController.$inject = ['CoreItemService', '$location'];

    function itemController(CoreItemService, $location) {
        //vars
        var vm = this;
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.item').service('itemService', itemService);

    itemService.$inject = [];

    function itemService() {}
})();
'use strict';

(function () {
    'use strict';

    angular.module('controlpanel.user', []).config(loginConfig);

    loginConfig.$inject = ['$routeProvider'];
    function loginConfig($routeProvider) {
        $routeProvider.when("/user", {
            controller: 'userController',
            controllerAs: 'vm',
            templateUrl: 'modules/user/user.html',
            allowWithoutEvent: true,
            role: 'admin'
        });
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.user').controller('userController', userController);

    userController.$inject = ['CoreUserService', '$location'];

    function userController(CoreUserService, $location) {
        //vars
        var vm = this;
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.user').service('userService', userService);

    userService.$inject = [];

    function userService() {}
})();
'use strict';

(function () {
    'use strict';

    angular.module('controlpanel.accessDenied', []).config(accessDeniedConfig);

    accessDeniedConfig.$inject = ['$routeProvider'];
    function accessDeniedConfig($routeProvider) {
        $routeProvider.when("/access-denied", {
            controller: 'accessDeniedController',
            controllerAs: 'vm',
            templateUrl: 'modules/error/access-denied/access-denied.html',
            allowWithoutEvent: true
        });
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.accessDenied').controller('accessDeniedController', accessDeniedController);

    accessDeniedController.$inject = ['$location'];

    function accessDeniedController($location) {
        //vars
        var vm = this;
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel.accessDenied').service('accessDeniedService', accessDeniedService);

    accessDeniedService.$inject = [];

    function accessDeniedService() {}
})();
'use strict';

(function () {
    'use strict';

    angular.module('controlpanel').component('menu', {
        bindings: {
            compress: "="
        },
        templateUrl: 'components/menu/menu.html',
        controller: menuController,
        controllerAs: 'vm'
    });

    menuController.$inject = ['$scope'];

    function menuController($scope) {
        var vm = this;
        $scope.$watch(function () {
            return vm.compress;
        }, function (newCom) {
            console.log(newCom);
        });
    }
})();
'use strict';

(function () {

    'use strict';

    var staticRoot = 'http://127.0.0.1:3131/api/';
    angular.module('controlpanel').constant('CONST', {

        getLivros: staticRoot,
        getCupom: staticRoot.concat('getCupom')

    });
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel').factory('DataFactory', DataFactory);

    DataFactory.$inject = [];

    function DataFactory() {

        var data = {};

        return data;
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel').service('HTTPSERVICE', HTTPSERVICE);

    HTTPSERVICE.$inject = ['$http', '$q'];

    function HTTPSERVICE($http, $q) {
        var vm = this;

        vm.get = function (url) {
            return $http.get(url).then(function (data) {
                return data.data;
            }, function (err) {
                return err;
            });
        };

        vm.post = function (url, params) {
            return $http.post(url, params).then(function (data) {
                return data.data;
            }, function (err) {
                return err;
            });
        };

        vm.delete = function (url) {
            return $http.delete(url).then(function (data) {
                return data.data;
            }, function (err) {
                return err;
            });
        };

        vm.put = function (url) {
            return $http.delete(url).then(function (data) {
                return data.data;
            }, function (err) {
                return err;
            });
        };
    }
})();
'use strict';

(function () {

    'use strict';

    angular.module('controlpanel').directive('ngEnter', function () {
        return function (scope, element, attrs) {
            element.bind("keydown keypress", function (event) {
                if (event.which === 13) {
                    scope.$apply(function () {
                        scope.$eval(attrs.ngEnter, { 'event': event });
                    });
                    event.preventDefault();
                }
            });
        };
    });
})();